---
apiVersion: triliovault.trilio.io/v1
kind: BackupPlan
metadata:
  name: organizarrs
  namespace: organizarrs
spec:
  backupConfig:
    retentionPolicy:
      apiVersion: triliovault.trilio.io/v1
      kind: Policy
      name: retention
      namespace: organizarrs

    schedulePolicy:
      fullBackupPolicy:
        apiVersion: triliovault.trilio.io/v1
        kind: Policy
        name: weekly-schedule
        namespace: organizarrs

      incrementalBackupPolicy:
        apiVersion: triliovault.trilio.io/v1
        kind: Policy
        name: daily-schedule
        namespace: organizarrs

    target:
      apiVersion: triliovault.trilio.io/v1
      kind: Target
      name: hyperion
      namespace: organizarrs

  excludeResources:
    labelSelector:
      - matchExpressions:
          - key: "triliovault.trilio.io/backup"
            operator: "DoesNotExist"

  includeResources:
    labelSelector:
      - matchLabels:
          triliovault.trilio.io/backup: "true"
