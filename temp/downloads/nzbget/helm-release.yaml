# ---
# apiVersion: helm.toolkit.fluxcd.io/v2beta1
# kind: HelmRelease
# metadata:
#   name: nzbget
#   namespace: downloads
# spec:
#   interval: 5m
#   chart:
#     spec:
#       # renovate: registryUrl=https://k8s-at-home.com/charts/
#       chart: nzbget
#       version: 8.0.1
#       sourceRef:
#         kind: HelmRepository
#         name: k8s-at-home-charts
#         namespace: flux-system
#       interval: 5m
#   values:
#     controllerType: deployment
#     podSecurityContext:
#       runAsUser: 1031
#       runAsGroup: 100
#       fsGroup: 100
#     image:
#       repository: ghcr.io/k8s-at-home/nzbget
#       tag: v21.0
#     env:
#       TZ: "Australia/Melbourne"
#     service:
#       type: LoadBalancer
#       loadBalancerIP: 192.168.2.160
#     ingress:
#       enabled: true
#       annotations:
#         kubernetes.io/tls-acme: "true"
#         cert-manager.io/cluster-issuer: letsencrypt-staging
#         kubernetes.io/ingress.class: "nginx"
#       hosts:
#         - host: nzbget.${CLUSTER_DOMAIN}
#           paths:
#             - path: /
#               pathType: Prefix
#       tls:
#         - hosts:
#             - "nzbget.${CLUSTER_DOMAIN}"
#           secretName: voltaicforge-com-tls
#     persistence:
#       config:
#         enabled: true
#         existingClaim: nzbget-config
#       downloads:
#         enabled: true
#         existingClaim: nfs-nas-media
#         mountPath: /downloads
#     # FIXME
#     podAnnotations:
#       #   backup.velero.io/backup-volumes: config
#       replicas-max: "1"
#     resources:
#       requests:
#         memory: 250Mi
#         cpu: 500m
#       limits:
#         memory: 7500Mi
